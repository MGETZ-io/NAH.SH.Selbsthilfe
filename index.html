<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NAH.SH Selbsthilfe</title>
    <link rel="icon" type="image/svg+xml" href="Logo.svg">
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            text-align: center;
            background-color: white;
        }

        .header {
            display: flex;
            align-items: center;
            padding: 20px;
            background-color: white;
            border-bottom: 3px solid #003366;
        }

        .header img {
            height: 50px;
            margin-right: 10px;
        }

        .question {
            font-size: 24px;
            font-weight: bold;
            margin: 30px 0;
        }

        .options {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
        }

        .option {
            padding: 15px 25px;
            font-size: 18px;
            font-weight: bold;
            border: 2px solid #006699;
            border-radius: 10px;
            cursor: pointer;
            transition: transform 0.3s ease-in-out, opacity 0.3s;
            opacity: 1;
        }

        .option:hover {
            background-color: #006699;
            color: white;
        }

        .zoom {
            transform: scale(1.1);
            opacity: 0.5;
        }
    </style>
</head>
<body>

    <!-- Header mit Logo -->
    <div class="header">
        <img src="Logo.svg" alt="NAH.SH Logo">
        <h1>Selbsthilfe</h1>
    </div>

    <!-- Fragenbereich -->
    <div id="selfhelp-container">
        <p class="question">Wo arbeitest du?</p>
        <div class="options">
            <div class="option" data-class="1">Remote / Citrix</div>
            <div class="option" data-class="2">Lokal / Im Büro</div>
        </div>
    </div>

    <script>
        // Baumstruktur mit den möglichen Antworten und Weiterleitungen
        const tree = {
            "1": { 
                text: "Remote / Citrix", 
                next: { 
                    "1.1": { text: "Login-Probleme", next: { "1.Ende": "/docs/help/LoginProbleme.html" } },
                    "1.2": { text: "Citrix Features", next: { "1.Ende": "/docs/help/CitrixFeatures.html" } }
                } 
            },
            "2": { 
                text: "Lokal / Im Büro", 
                next: { 
                    "2.1": { text: "Drucker funktioniert nicht", next: { "2.Ende": "/docs/help/Drucker.html" } },
                    "2.2": { text: "Kein Internet", next: { "2.Ende": "/docs/help/Internet.html" } }
                } 
            }
        };

        const container = document.getElementById("selfhelp-container");

        // Funktion, die beim Klick auf eine Option ausgelöst wird
        function handleSelection(option, key) {
            option.classList.add("zoom");

            setTimeout(() => {
                option.classList.remove("zoom");

                // Wenn eine Weiterleitung existiert
                if (tree[key]?.next) {
                    showNextQuestion(tree[key].next);
                } else if (key.endsWith(".Ende")) {
                    console.log("Ende erreicht, Weiterleitung zu:", tree[key]);
                    // Verwendung von setTimeout, um sicherzustellen, dass die Weiterleitung nach der Animation erfolgt
                    setTimeout(() => {
                        window.location.href = tree[key]; // Weiterleitung zur URL
                    }, 500);  // 500ms Verzögerung, um sicherzustellen, dass die Animation fertig ist
                }
            }, 500);
        }

        // Funktion zum Anzeigen der nächsten Frage
        function showNextQuestion(subTree) {
            container.innerHTML = "";  // Clear the container

            const question = document.createElement("p");
            question.classList.add("question");
            question.textContent = "Wähle eine Option:";  // Neue Frage
            container.appendChild(question);

            const optionsDiv = document.createElement("div");
            optionsDiv.classList.add("options");

            // Erzeuge die neuen Optionen
            Object.keys(subTree).forEach(subKey => {
                const div = document.createElement("div");
                div.classList.add("option");
                div.textContent = subTree[subKey].text;
                div.onclick = () => handleSelection(div, subKey);  // Klick-Event für jede Option
                optionsDiv.appendChild(div);
            });

            container.appendChild(optionsDiv);
        }

        // Initiale Auswahl-Behandlung
        document.querySelectorAll(".option").forEach(option => {
            option.onclick = () => handleSelection(option, option.dataset.class);
        });
    </script>
</body>
</html>
